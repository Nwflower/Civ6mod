--  FILE: CIVILIZATION_ASIS_Modifier.sql
--  VERSION: 1
--  Author: Nwflower
--  Spicial Thanks: Uni
--  Copyright (c) 2025.
--      All rights reserved.
--  DateCreated: 2025/9/13 11:37:52
-- ===========
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_NWASIS2', 'MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF', 'MODIFIER_PLAYER_UNITS_ADJUST_COMBAT_STRENGTH', 0, 0, 0, NULL, 'REQSET_NW_ASIS_SEEGE_ANTI_DEBUFF');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF', 'Amount', 17);
INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF', 'Preview', 'LOC_MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF');
-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQSET_NW_ASIS_SEEGE_ANTI_DEBUFF', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQSET_NW_ASIS_SEEGE_ANTI_DEBUFF', 'REQ_NW_ASIS_IS_SEEGE'),
('REQSET_NW_ASIS_SEEGE_ANTI_DEBUFF', 'REQ_NW_ASIS_IS_PK_LAND'),
('REQSET_NW_ASIS_SEEGE_ANTI_DEBUFF', 'REQ_NW_ASIS_IS_ATTACKING');
-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_ASIS_IS_SEEGE', 'REQUIREMENT_UNIT_PROMOTION_CLASS_MATCHES'),
('REQ_NW_ASIS_IS_PK_LAND', 'REQUIREMENT_OPPONENT_UNIT_DOMAIN_MATCHES'),
('REQ_NW_ASIS_IS_ATTACKING', 'REQUIREMENT_PLAYER_IS_ATTACKING');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_ASIS_IS_SEEGE', 'UnitPromotionClass', 'PROMOTION_CLASS_SIEGE'),
('REQ_NW_ASIS_IS_PK_LAND', 'UnitDomain', 'DOMAIN_LAND');

-- 适配其他更改了攻城单位减益的MOD
-- UPDATE ModifierArguments SET Value = (SELECT GlobalParameters.Value FROM GlobalParameters WHERE GlobalParameters.Name = 'COMBAT_BOMBARD_VS_UNIT_STRENGTH_MODIFIER') WHERE ModifierId = 'MODIFIER_TRAIT_LEADER_NWASIS2_ANTI_SEEGE_DEBUFF'
-- AND EXISTS(SELECT GlobalParameters.Value FROM GlobalParameters WHERE GlobalParameters.Name = 'COMBAT_BOMBARD_VS_UNIT_STRENGTH_MODIFIER');

-- 解锁“金属铸造”后，生产攻城单位时+30% [ICON_PRODUCTION] 生产力。

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_NWASIS2', 'MODIFIER_TRAIT_LEADER_NWASIS2_SPRODUC');

INSERT INTO Modifiers (ModifierId, ModifierType, OwnerRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_SPRODUC', 'MODIFIER_PLAYER_CITIES_ADJUST_UNIT_TAG_ERA_PRODUCTION',  'REQSET_NW_HAS_TECH_METAL_CASTING');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_SPRODUC', 'Amount', '30'),
('MODIFIER_TRAIT_LEADER_NWASIS2_SPRODUC', 'EraType', 'NO_ERA'),
('MODIFIER_TRAIT_LEADER_NWASIS2_SPRODUC', 'UnitPromotionClass', 'PROMOTION_CLASS_SIEGE');

-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQSET_NW_HAS_TECH_METAL_CASTING', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQSET_NW_HAS_TECH_METAL_CASTING', 'REQ_NW_ASIS_HAS_TECH_METAL_CASTING');
-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_ASIS_HAS_TECH_METAL_CASTING', 'REQUIREMENT_PLAYER_HAS_TECHNOLOGY');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_ASIS_HAS_TECH_METAL_CASTING', 'TechnologyType', 'TECH_METAL_CASTING');


-- 解锁“钢铁”后，攻城单位+1 [ICON_Renged] 射程。
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_NWASIS2', 'MODIFIER_TRAIT_LEADER_NWASIS2_ATTACK_RANGE');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_ATTACK_RANGE', 'MODIFIER_PLAYER_UNITS_ADJUST_ATTACK_RANGE', 0, 0, 0, 'REQSET_NW_HAS_TECH_STEEL', 'REQSET_NW_ASIS_RENGED');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_NWASIS2_ATTACK_RANGE', 'Amount', '1');
-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQSET_NW_HAS_TECH_STEEL', 'REQUIREMENTSET_TEST_ALL'),
('REQSET_NW_ASIS_RENGED', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQSET_NW_HAS_TECH_STEEL', 'REQ_NW_ASIS_TECH_STEEL'),
('REQSET_NW_ASIS_RENGED', 'REQ_NW_ASIS_RENGED');
-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_ASIS_TECH_STEEL', 'REQUIREMENT_PLAYER_HAS_TECHNOLOGY'),
('REQ_NW_ASIS_RENGED', 'REQUIREMENT_UNIT_PROMOTION_CLASS_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_ASIS_TECH_STEEL', 'TechnologyType', 'TECH_STEEL'),
('REQ_NW_ASIS_RENGED', 'UnitPromotionClass', 'PROMOTION_CLASS_SIEGE');

-- 本土道路等级+1。
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_CIVILIZATION_NW_ASIS_NWASIS1', 'MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_ROUTE_LEVEL');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_ROUTE_LEVEL', 'MODIFIER_PLAYER_ADJUST_IMPROVED_ROUTE_LEVEL');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_ROUTE_LEVEL', 'ImprovedRouteLevel', '1');

-- 若被征服的城市在您的 [ICON_Capital] 首都贸易范围之内，则自动建立一条到 [ICON_Capital] 首都的道路。
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_CIVILIZATION_NW_ASIS_NWASIS1', 'MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_GRANT_ROAD_TO_CAPITAL');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_GRANT_ROAD_TO_CAPITAL', 'MODIFIER_NW_ASIS_PLAYER_CAPTURED_CITIES_GRANT_ROAD_TO_CAPITAL', 1, 1);
-- Custom ModifierType
INSERT INTO Types (Type, Kind) VALUES
('MODIFIER_NW_ASIS_PLAYER_CAPTURED_CITIES_GRANT_ROAD_TO_CAPITAL', 'KIND_MODIFIER');
INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES
('MODIFIER_NW_ASIS_PLAYER_CAPTURED_CITIES_GRANT_ROAD_TO_CAPITAL', 'COLLECTION_PLAYER_CAPTURED_CITIES', 'EFFECT_GRANT_CITY_ROAD_TO_CAPITAL');


INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_CIVILIZATION_NW_ASIS_NWASIS1', 'MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_JUNGONG');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_JUNGONG', 'MODIFIER_PLAYER_GRANT_UNIT_IN_CAPITAL');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_JUNGONG', 'AllowUniqueOverride', '1'),
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_JUNGONG', 'Amount', '1'),
('MODIFIER_TRAIT_CIVILIZATION_NW_ASIS_NWASIS1_JUNGONG', 'UnitType', 'UNIT_MILITARY_ENGINEER');

