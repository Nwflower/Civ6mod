--	FILE: NewLeader3_Improvement.sql
--  VERSION: 1
--  Author: Nwflower
--  Spicial Thanks: Uni
--	Copyright (c) 2025.
--	All rights reserved.
--  DateCreated: 2025/9/22 21:48:22

INSERT INTO Types(Type, Kind)
VALUES ('IMPROVEMENT_NW010', 'KIND_IMPROVEMENT');

INSERT INTO Improvements
(ImprovementType,
 Name,
 PrereqTech,
 Buildable,
 Description,
 PlunderType,
 PlunderAmount,
 Housing,
 Icon,
 TraitType,
 Domain,
 AdjacentToLand,
 SameAdjacentValid)
VALUES ('IMPROVEMENT_NW010',
        'LOC_IMPROVEMENT_NW010_NAME',
        'TECH_ASTROLOGY',
        1,
        'LOC_IMPROVEMENT_NW010_DESCRIPTION',
        'PLUNDER_GOLD',
        37.5,
        1,
        'ICON_IMPROVEMENT_NW010',
        'TRAIT_IMPROVEMENT_NW010',
        'DOMAIN_LAND',
        0,
        0);

INSERT INTO Improvement_YieldChanges(ImprovementType, YieldType, YieldChange)
VALUES ('IMPROVEMENT_NW010', 'YIELD_FOOD', 1),
       ('IMPROVEMENT_NW010', 'YIELD_PRODUCTION', 0),
       ('IMPROVEMENT_NW010', 'YIELD_GOLD', 0),
       ('IMPROVEMENT_NW010', 'YIELD_CULTURE', 0),
       ('IMPROVEMENT_NW010', 'YIELD_FAITH', 0),
       ('IMPROVEMENT_NW010', 'YIELD_SCIENCE', 0);


INSERT INTO Improvement_ValidBuildUnits(ImprovementType, UnitType)
VALUES ('IMPROVEMENT_NW010', 'UNIT_BUILDER');

INSERT INTO Improvement_ValidTerrains(ImprovementType, TerrainType)
SELECT 'IMPROVEMENT_NW010', TerrainType
FROM Terrains;

INSERT INTO Improvement_Tourism(ImprovementType, TourismSource, PrereqTech, ScalingFactor)VALUES
('IMPROVEMENT_NW010', 'TOURISMSOURCE_APPEAL', 'TECH_CASTLES', 200);

-- 如果同时相邻圣地和学院，额外提供+1 [ICON_FOOD] 食物、+1 [ICON_PRODUCTION] 生产力、+1 [ICON_CULTURE] 文化、+1 [ICON_FAITH] 信仰值、+1 [ICON_GOLD] 金币。
INSERT INTO ImprovementModifiers (ImprovementType, ModifierId) VALUES
('IMPROVEMENT_NW010', 'MODIFIER_IMPROVEMENT_NW010');
INSERT INTO Modifiers (ModifierId, ModifierType,  SubjectRequirementSetId) VALUES
('MODIFIER_IMPROVEMENT_NW010', 'MODIFIER_SINGLE_PLOT_ADJUST_PLOT_YIELDS',  'REQS_MODIFIER_IMPROVEMENT_NW010');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_IMPROVEMENT_NW010', 'Amount', '1,1,1,1,1'),
('MODIFIER_IMPROVEMENT_NW010', 'YieldType', 'YIELD_FOOD,YIELD_CULTURE,YIELD_PRODUCTION,YIELD_FAITH,YIELD_GOLD');
-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_MODIFIER_IMPROVEMENT_NW010', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_MODIFIER_IMPROVEMENT_NW010', 'REQ_NMODIFIER_IMPROVEMENT_NW0101'),
('REQS_MODIFIER_IMPROVEMENT_NW010', 'REQ_NMODIFIER_IMPROVEMENT_NW0102');
-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NMODIFIER_IMPROVEMENT_NW0101', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES'),
('REQ_NMODIFIER_IMPROVEMENT_NW0102', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NMODIFIER_IMPROVEMENT_NW0101', 'DistrictType', 'DISTRICT_HOLY_SITE'),
('REQ_NMODIFIER_IMPROVEMENT_NW0101', 'MaxRange', '1'),
('REQ_NMODIFIER_IMPROVEMENT_NW0101', 'MinRange', '1'),
('REQ_NMODIFIER_IMPROVEMENT_NW0102', 'DistrictType', 'DISTRICT_NW009'),
('REQ_NMODIFIER_IMPROVEMENT_NW0102', 'MaxRange', '1'),
('REQ_NMODIFIER_IMPROVEMENT_NW0102', 'MinRange', '1');


INSERT INTO ImprovementModifiers (ImprovementType, ModifierId) VALUES
('IMPROVEMENT_NW010', 'MODIFIER_IMPROVEMENT_NW010_2');
INSERT INTO Modifiers (ModifierId, ModifierType, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_IMPROVEMENT_NW010_2', 'MODIFIER_SINGLE_PLOT_ADJUST_PLOT_YIELDS',  'REQS_NW_PLAYER_HAS_CIVIC_THEOLOGY','REQS_MODIFIER_IMPROVEMENT_NW010');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_IMPROVEMENT_NW010_2', 'Amount', '1'),
('MODIFIER_IMPROVEMENT_NW010_2', 'YieldType', 'YIELD_FAITH');


-- RequirementSets
INSERT OR IGNORE INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_NW_PLAYER_HAS_CIVIC_THEOLOGY', 'REQUIREMENTSET_TEST_ALL');
INSERT OR IGNORE INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_NW_PLAYER_HAS_CIVIC_THEOLOGY', 'REQ_NW_PLAYER_HAS_CIVIC_THEOLOGY');
-- Requirements
INSERT OR IGNORE INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_PLAYER_HAS_CIVIC_THEOLOGY', 'REQUIREMENT_PLAYER_HAS_CIVIC');
INSERT OR IGNORE INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_PLAYER_HAS_CIVIC_THEOLOGY', 'CivicType', 'CIVIC_THEOLOGY');


-- 至少相邻四个区域时，+1 [ICON_Amenities] 宜居度。
INSERT INTO ImprovementModifiers (ImprovementType, ModifierId) VALUES
('IMPROVEMENT_NW010', 'MODIFIER_IMPROVEMENT_NW010_AMENITY');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_IMPROVEMENT_NW010_AMENITY', 'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_AMENITY', 0, 0, 0, NULL, 'REQS_NW_IMPROVEMENT_ADJACENT_4_DISTRICT');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_IMPROVEMENT_NW010_AMENITY', 'Amount', '1');

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'REQ_NW_IMPROVEMENT_ADJACENT_4_DISTRICT');
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'REQUIREMENT_COLLECTION_COUNT_ATLEAST');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'CollectionType', 'COLLECTION_PLAYER_DISTRICTS'),
('REQ_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'Count', '4'),
('REQ_NW_IMPROVEMENT_ADJACENT_4_DISTRICT', 'RequirementSetId', 'REQS_NW_IMPROVEMENT_ADJACENT_DISTRICT');


INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_NW_IMPROVEMENT_ADJACENT_DISTRICT', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_NW_IMPROVEMENT_ADJACENT_DISTRICT', 'REQ_NW_IMPROVEMENT_ADJACENT_DISTRICT');
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_IMPROVEMENT_ADJACENT_DISTRICT', 'REQUIREMENT_PLOT_ADJACENT_TO_OWNER');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_IMPROVEMENT_ADJACENT_DISTRICT', 'MaxDistance', '1'),
('REQ_NW_IMPROVEMENT_ADJACENT_DISTRICT', 'MinDistance', '1');
