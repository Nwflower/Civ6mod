--  FILE: NewLeader1_Modifier.sql
--  VERSION: 1
--  Author: Nwflower
--  Spicial Thanks: Uni
--  Copyright (c) 2025.
--      All rights reserved.
--  DateCreated: 2025/9/2 15:46:23

--============================================================
-- Lua Support
--============================================================
CREATE TABLE IF NOT EXISTS Nwflower_MOD_Traits(
TraitType TEXT NOT NULL,
PRIMARY KEY (TraitType),
FOREIGN KEY (TraitType) REFERENCES Traits (TraitType) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT OR IGNORE INTO Nwflower_MOD_Traits(TraitType) VALUES
('TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO'),
('TRAIT_LEADER_TRAIT_SANQIANSHENGUO');

INSERT OR IGNORE INTO TraitModifiers(TraitType,ModifierId)SELECT
TraitType,				'MODFEAT_TRAIT_PROPERTY_'||TraitType
FROM Nwflower_MOD_Traits;

INSERT OR IGNORE INTO Modifiers(ModifierId,ModifierType)SELECT
'MODFEAT_TRAIT_PROPERTY_'||TraitType,			'MODIFIER_PLAYER_ADJUST_PROPERTY'
FROM Nwflower_MOD_Traits;

INSERT OR IGNORE INTO ModifierArguments(ModifierId,Name,Value)SELECT
'MODFEAT_TRAIT_PROPERTY_'||TraitType,			'Key',	'PROPERTY_'||TraitType
FROM Nwflower_MOD_Traits UNION SELECT
'MODFEAT_TRAIT_PROPERTY_'||TraitType,			'Amount',						1
FROM Nwflower_MOD_Traits;

--======================
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_TRAIT_SANQIANSHENGUO', 'MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS', 'MODIFIER_PLAYER_ADJUST_WAR_WEARINESS', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS', 'Amount', '-100'),
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS', 'Overall', 'TRUE');



INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_TRAIT_SANQIANSHENGUO', 'MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS_DIPLO_VISIBILITY');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS_DIPLO_VISIBILITY', 'MODIFIER_PLAYER_ADD_DIPLO_VISIBILITY', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS_DIPLO_VISIBILITY', 'Amount', '1'),
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS_DIPLO_VISIBILITY', 'Source', 'SOURCE_TRAIT'),
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_WAR_WEARINESS_DIPLO_VISIBILITY', 'SourceType', 'DIPLO_SOURCE_FEMALE_ONLY');



INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_TRAIT_SANQIANSHENGUO', 'MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_POPULATION');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_POPULATION', 'MODIFIER_PLAYER_CITIES_ADJUST_CITY_YIELD_PER_POPULATION', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_POPULATION', 'Amount', '3'),
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_POPULATION', 'YieldType', 'YIELD_FAITH');



INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_LEADER_TRAIT_SANQIANSHENGUO', 'MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_KILL');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_KILL', 'MODIFIER_NW_NLM_PLAYER_UNIT_ADJUST_GREAT_PEOPLE_POINTS_PER_KILL', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_KILL', 'Amount', '5'),
('MODIFIER_TRAIT_LEADER_TRAIT_SANQIANSHENGUO_YIELD_PER_KILL', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_GENERAL');


-- Custom ModifierType
INSERT INTO Types (Type, Kind) VALUES
('MODIFIER_NW_NLM_PLAYER_UNIT_ADJUST_GREAT_PEOPLE_POINTS_PER_KILL', 'KIND_MODIFIER');
INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES
('MODIFIER_NW_NLM_PLAYER_UNIT_ADJUST_GREAT_PEOPLE_POINTS_PER_KILL', 'COLLECTION_PLAYER_UNITS', 'EFFECT_ADJUST_GREAT_PEOPLE_POINTS_PER_KILL');

--============================================================

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO', 'MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_GRANT_ROAD_TO_CAPITAL');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_GRANT_ROAD_TO_CAPITAL', 'MODIFIER_PLAYER_CITIES_GRANT_ROAD_TO_CAPITAL', 0, 0, 0, NULL, NULL);



INSERT INTO TraitModifiers (TraitType, ModifierId) SELECT
'TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO', 'MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_POWERED_BUILDINGS_'||YieldType
FROM Yields;
INSERT INTO Modifiers (ModifierId, ModifierType) SELECT
'MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_POWERED_BUILDINGS_'||YieldType,'MODIFIER_PLAYER_CITIES_ADJUST_YIELD_FROM_POWERED_BUILDINGS'
FROM Yields;
INSERT INTO ModifierArguments (ModifierId, Name, Value) SELECT
'MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_POWERED_BUILDINGS_'||YieldType, 'Amount', '4' FROM Yields UNION SELECT
'MODIFIER_TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO_POWERED_BUILDINGS_'||YieldType, 'YieldType', YieldType
FROM Yields;


--============================================================
-- 贸易站

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
('TRAIT_CIVILIZATION_NW_XIULUOWEIMIAN_TRAIT_XIULUO', 'TRAIT_FREE_TRADING_POSTS');