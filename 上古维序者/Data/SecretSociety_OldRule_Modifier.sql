--  FILE: SecretSociety_WorldTree_Modifier.sql
--  VERSION: 1
--  Author: Nwflower
--  Spicial Thanks: Uni
--  Copyright (c) 2025.
--      All rights reserved.
--  DateCreated: 2025/7/3 11:22:01

--============================================================
-- Modifiers
--============================================================

-- GOVERNOR_PROMOTION_OLDRULE_1
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_1', 'CIVIC_GRANT_PLAYER_GOVERNOR_POINTS'),
('GOVERNOR_PROMOTION_OLDRULE_2', 'CIVIC_GRANT_PLAYER_GOVERNOR_POINTS'),
('GOVERNOR_PROMOTION_OLDRULE_3', 'CIVIC_GRANT_PLAYER_GOVERNOR_POINTS'),
('GOVERNOR_PROMOTION_OLDRULE_4', 'CIVIC_GRANT_PLAYER_GOVERNOR_POINTS');
-- 首都出现一个星球塑形师，
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_1', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_CAPITAL_UNIT');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_CAPITAL_UNIT', 'MODIFIER_PLAYER_GRANT_UNIT_IN_CAPITAL', 0, 1, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_CAPITAL_UNIT', 'AllowUniqueOverride', '0'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_CAPITAL_UNIT', 'Amount', '1'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_CAPITAL_UNIT', 'UnitType', 'UNIT_EARTH_ENGINEER');

-- 解锁“国家劳动力”后，非首都城市也获得一个星球塑形师；
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_1', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY', 'MODIFIER_NW_SSO_PLAYER_GRANT_UNIT_IN_CITES', 0, 1, 0, 'REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2', 'REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY', 'AllowUniqueOverride', '0'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY', 'Amount', '1'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY', 'UnitType', 'UNIT_EARTH_ENGINEER');

-- Custom ModifierType
INSERT INTO Types (Type, Kind) VALUES
('MODIFIER_NW_SSO_PLAYER_GRANT_UNIT_IN_CITES', 'KIND_MODIFIER');
INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES
('MODIFIER_NW_SSO_PLAYER_GRANT_UNIT_IN_CITES', 'COLLECTION_PLAYER_CITIES', 'EFFECT_GRANT_UNIT_IN_CITY');

-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2', 'REQUIREMENTSET_TEST_ALL'),
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2', 'REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2'),
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1', 'REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1');

-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType, Inverse) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1', 'REQUIREMENT_CITY_HAS_BUILDING', 1),
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2', 'REQUIREMENT_PLAYER_HAS_CIVIC', 0);
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY1', 'BuildingType', 'BUILDING_PALACE'),
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_OTHER_CITY2', 'CivicType', 'CIVIC_STATE_WORKFORCE');

-- 所有城市+1 [ICON_HOUSING] 住房。

INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_1', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_ADD_HOUSING');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_ADD_HOUSING', 'MODIFIER_PLAYER_CITIES_ADJUST_POLICY_HOUSING');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_ADD_HOUSING', 'Amount', 1);

-- Trigger
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_TRIGGER', 'MODIFIER_PLAYER_ADJUST_YIELD_CHANGE');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_TRIGGER', 'Amount', '1'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_1_TRIGGER', 'YieldType', 'YIELD_GOLD');


--============================================================
-- 2
--============================================================

-- 允许建造“动物园”的强力替代品：“物种陈列馆”、“工厂”的强力替代品：“物种精炼厂”。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_2', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_MUSEUM');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_MUSEUM', 'MODIFIER_PLAYER_ADJUST_VALID_BUILDING');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_MUSEUM', 'BuildingType', 'BUILDING_BIOLOGY_MUSEUM'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_MUSEUM', 'BuildingTypeToReplace', 'BUILDING_ZOO');

INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_2', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_FACTORY');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_FACTORY', 'MODIFIER_PLAYER_ADJUST_VALID_BUILDING');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_FACTORY', 'BuildingType', 'BUILDING_BIOLOGY_FACTORY'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_UNLOCK_FACTORY', 'BuildingTypeToReplace', 'BUILDING_FACTORY');

-- 拥有物种精炼厂提供一份香水
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_2', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'MODIFIER_NW_SSO_CAPITAL_CITY_GRANT_RESOURCE_IN_CITY', 0, 0, 0, 'REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'Amount', '1'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'ResourceType', 'RESOURCE_PERFUME');

-- Custom ModifierType
INSERT INTO Types (Type, Kind) VALUES
('MODIFIER_NW_SSO_CAPITAL_CITY_GRANT_RESOURCE_IN_CITY', 'KIND_MODIFIER');
INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES
('MODIFIER_NW_SSO_CAPITAL_CITY_GRANT_RESOURCE_IN_CITY', 'COLLECTION_PLAYER_CAPITAL_CITY', 'EFFECT_GRANT_FREE_RESOURCE_IN_CITY');

-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE');

-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'REQUIREMENT_PLAYER_HAS_BUILDING');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_2_GIVE', 'BuildingType', 'BUILDING_BIOLOGY_FACTORY');


--============================================================
-- 3
--============================================================

-- 允许生产星球塑形师。解锁星球塑形师为宇航中心或曼哈顿计划加速11%进度的能力。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNIT_EARTH_ENGINEER');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNIT_EARTH_ENGINEER', 'MODIFIER_PLAYER_ADJUST_VALID_UNIT_BUILD', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNIT_EARTH_ENGINEER', 'UnitType', 'UNIT_EARTH_ENGINEER');


INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_ABILITY');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_ABILITY', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_ABILITY', 'AbilityType', 'ABILITY_EARTH_ENGINEER_UNLOCK3');

-- 忽略普通科技要求，显示铝、铀资源。
-- 允许建造宇航中心。建成宇航中心后，允许生产项目曼哈顿计划。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_1');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_1', 'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_1', 'ResourceType', 'RESOURCE_URANIUM');

INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_2');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_2', 'MODIFIER_PLAYER_GRANT_FREE_RESOURCE_VISIBILITY');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_UNLOCK_RESOURCE_2', 'ResourceType', 'RESOURCE_ALUMINUM');


-- 允许建造宇航中心。建成宇航中心后，解锁科技核裂变。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_DISTRICT');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_DISTRICT', 'MODIFIER_PLAYER_ADJUST_DISTRICT_UNLOCK', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_DISTRICT', 'DistrictType', 'DISTRICT_SPACEPORT'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_DISTRICT', 'TechType', 'TECH_POTTERY');


INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_3', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'MODIFIER_PLAYER_GRANT_SPECIFIC_TECHNOLOGY', 0, 0, 0, 'OWNREQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'TechType', 'TECH_NUCLEAR_FISSION');

-- RequirementSets
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('OWNREQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('OWNREQS_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH');
-- Requirements
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'REQUIREMENT_PLAYER_HAS_DISTRICT');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_MODIFIER_GOVERNOR_PROMOTION_OLDRULE_3_GIVE_TECH', 'DistrictType', 'DISTRICT_SPACEPORT');


--============================================================
-- 4
--============================================================

-- 解锁所有科技的尤里卡
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) SELECT
'GOVERNOR_PROMOTION_OLDRULE_4','MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_BOOST_'||TechnologyType
FROM Technologies;
INSERT INTO Modifiers (ModifierId, ModifierType) SELECT
'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_BOOST_'||TechnologyType,'MODIFIER_PLAYER_GRANT_SPECIFIC_TECH_BOOST'
FROM Technologies;
INSERT INTO ModifierArguments (ModifierId, Name, Value) SELECT
'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_BOOST_'||TechnologyType, 'TechType', TechnologyType
FROM Technologies;

-- 为所有城市提供10点清洁电力。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_OLDRULE_4', 'MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_FREE_POWER_SOURCE_MISC');
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_FREE_POWER_SOURCE_MISC', 'MODIFIER_PLAYER_CITIES_ADJUST_FREE_POWER');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_FREE_POWER_SOURCE_MISC', 'SourceType', 'FREE_POWER_SOURCE_MISC'),
('MODIFIER_GOVERNOR_PROMOTION_OLDRULE_4_FREE_POWER_SOURCE_MISC', 'Amount', 10);

