--	FILE: CIVILIZATION_GUMOON_Expansion2.sql
--  VERSION: 1
--  Author: Nwflower
--  Spicial Thanks: Uni
--	Copyright (c) 2025.
--	All rights reserved.
--  DateCreated: 2025/9/24 19:28:22
--======================================================================
--  作者： 千川白浪
--  特别鸣谢： 优妮
--======================================================================


INSERT INTO Types(Type, Kind)
VALUES ('GOVERNOR_GUMOON', 'KIND_GOVERNOR'),
       ('GOVERNOR_PROMOTION_GUMOON_1', 'KIND_GOVERNOR_PROMOTION'),
       ('GOVERNOR_PROMOTION_GUMOON_2', 'KIND_GOVERNOR_PROMOTION'),
       ('GOVERNOR_PROMOTION_GUMOON_3', 'KIND_GOVERNOR_PROMOTION'),
       ('GOVERNOR_PROMOTION_GUMOON_4', 'KIND_GOVERNOR_PROMOTION'),
       ('GOVERNOR_PROMOTION_GUMOON_5', 'KIND_GOVERNOR_PROMOTION'),
       ('GOVERNOR_PROMOTION_GUMOON_6', 'KIND_GOVERNOR_PROMOTION');

-- 声明总督
INSERT INTO Governors(GovernorType, Name, Description, IdentityPressure, Title, ShortTitle, TransitionStrength,
                      AssignCityState, Image, PortraitImage, PortraitImageSelected, TraitType)
SELECT 'GOVERNOR_GUMOON',
       'LOC_GOVERNOR_GUMOON_NAME',
       'LOC_GOVERNOR_GUMOON_NAME',
       8,
       'LOC_GOVERNOR_GUMOON_NAME',
       'LOC_GOVERNOR_GUMOON_NAME',
       100,
       0,
       'GOVERNOR_GUMOON',
       'GOVERNOR_GUMOON',
       'GOVERNOR_GUMOON',
       'TRAIT_GOVERNOR_GUMOON'
FROM Governors
WHERE GovernorType = 'GOVERNOR_THE_BUILDER';

INSERT INTO GovernorPromotions
(GovernorPromotionType, Name, Description, Level, 'Column', BaseAbility)
VALUES ('GOVERNOR_PROMOTION_GUMOON_1', 'LOC_GUMOON_PROMOTION_1_NAME', 'LOC_GUMOON_PROMOTION_1_DESCRIPTION',
        0, 1, 1),
       ('GOVERNOR_PROMOTION_GUMOON_2', 'LOC_GUMOON_PROMOTION_2_NAME', 'LOC_GUMOON_PROMOTION_2_DESCRIPTION',
        1, 0, 0),
       ('GOVERNOR_PROMOTION_GUMOON_4', 'LOC_GUMOON_PROMOTION_4_NAME', 'LOC_GUMOON_PROMOTION_4_DESCRIPTION',
        1, 2, 0),
       ('GOVERNOR_PROMOTION_GUMOON_3', 'LOC_GUMOON_PROMOTION_3_NAME', 'LOC_GUMOON_PROMOTION_3_DESCRIPTION',
        2, 0, 0),
       ('GOVERNOR_PROMOTION_GUMOON_5', 'LOC_GUMOON_PROMOTION_5_NAME', 'LOC_GUMOON_PROMOTION_5_DESCRIPTION',
        2, 2, 0),
       ('GOVERNOR_PROMOTION_GUMOON_6', 'LOC_GUMOON_PROMOTION_6_NAME', 'LOC_GUMOON_PROMOTION_6_DESCRIPTION',
        3, 1, 0);

INSERT INTO GovernorPromotionSets
    (GovernorType, GovernorPromotion)
VALUES ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_1'),
       ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_2'),
       ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_3'),
       ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_4'),
       ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_5'),
       ('GOVERNOR_GUMOON', 'GOVERNOR_PROMOTION_GUMOON_6');

INSERT INTO GovernorPromotionPrereqs
    (GovernorPromotionType, PrereqGovernorPromotion)
VALUES ('GOVERNOR_PROMOTION_GUMOON_2', 'GOVERNOR_PROMOTION_GUMOON_1'),
       ('GOVERNOR_PROMOTION_GUMOON_4', 'GOVERNOR_PROMOTION_GUMOON_1'),
       ('GOVERNOR_PROMOTION_GUMOON_3', 'GOVERNOR_PROMOTION_GUMOON_2'),
       ('GOVERNOR_PROMOTION_GUMOON_5', 'GOVERNOR_PROMOTION_GUMOON_4'),
       ('GOVERNOR_PROMOTION_GUMOON_6', 'GOVERNOR_PROMOTION_GUMOON_3'),
       ('GOVERNOR_PROMOTION_GUMOON_6', 'GOVERNOR_PROMOTION_GUMOON_5');

-- 何春秋：战略资源每回合额外提供2份以及提供2点科技值。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_1', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_SR');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_SR', 'MODIFIER_SINGLE_CITY_ADJUST_EXTRA_ACCUMULATION', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_SR', 'Amount', '2');


INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_1', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_YIELD');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_YIELD', 'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'REQS_NW_PLOT_HAS_SSR');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_YIELD', 'Amount', '2'),
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_1_ADD_YIELD', 'YieldType', 'YIELD_SCIENCE');

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
('REQS_NW_PLOT_HAS_SSR', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
('REQS_NW_PLOT_HAS_SSR', 'REQ_NW_PLOT_HAS_SSR');
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
('REQ_NW_PLOT_HAS_SSR', 'REQUIREMENT_PLOT_RESOURCE_CLASS_TYPE_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
('REQ_NW_PLOT_HAS_SSR', 'ResourceClassType', 'RESOURCECLASS_STRATEGIC');

-- 房睇长：每人口提供2点科技值，外交能见等级加2。

INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_2', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_PER');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_PER', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_PER', 'Amount', '2'),
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_PER', 'YieldType', 'YIELD_SCIENCE');



INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_2', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_DIPLO_VISIBILITY');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_DIPLO_VISIBILITY', 'MODIFIER_PLAYER_ADD_DIPLO_VISIBILITY', 0, 0, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_DIPLO_VISIBILITY', 'Amount', '2'),
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_DIPLO_VISIBILITY', 'Source', 'SOURCE_TRAIT'),
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_2_DIPLO_VISIBILITY', 'SourceType', 'DIPLO_SOURCE_FEMALE_ONLY');

-- 李小白：每份巨作提供4点文化值。

INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) SELECT
'GOVERNOR_PROMOTION_GUMOON_3', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_3_'||GreatWorkObjectType
FROM GreatWorkObjectTypes;

INSERT INTO Modifiers (ModifierId, ModifierType) SELECT
'MODIFIER_GOVERNOR_PROMOTION_GUMOON_3_'||GreatWorkObjectType, 'MODIFIER_SINGLE_CITY_GRANT_YIELD_PER_GREAT_WORK'
FROM GreatWorkObjectTypes;

INSERT INTO ModifierArguments (ModifierId, Name, Value) SELECT
'MODIFIER_GOVERNOR_PROMOTION_GUMOON_3_'||GreatWorkObjectType, 'Amount', '4'
FROM GreatWorkObjectTypes UNION SELECT
'MODIFIER_GOVERNOR_PROMOTION_GUMOON_3_'||GreatWorkObjectType, 'GreatWorkObjectType', GreatWorkObjectType
FROM GreatWorkObjectTypes UNION SELECT
'MODIFIER_GOVERNOR_PROMOTION_GUMOON_3_'||GreatWorkObjectType, 'YieldType', 'YIELD_CULTURE'
FROM GreatWorkObjectTypes;

-- 吴帅：近战单位可以使蛮族归顺。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_4', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_4');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_4', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_4', 'AbilityType', 'ABILITY_QIN_MELEE_UNITS');

-- 战渡部和气海老祖：近战单位获得加7力，无视地形，攻击城墙时造成百分百伤害。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_5', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_5');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'AbilityType', 'ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5');


INSERT OR
REPLACE INTO TypeTags (Type, Tag)
VALUES ('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'CLASS_MELEE');

INSERT OR
REPLACE INTO Types (Type, Kind)
VALUES ('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'KIND_ABILITY');

INSERT OR
REPLACE INTO UnitAbilities(UnitAbilityType, Name, Description, Inactive)
VALUES ('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5',
        'LOC_GUMOON_PROMOTION_5_NAME',
        'LOC_GUMOON_PROMOTION_5_DESCRIPTION',
        1);


INSERT INTO UnitAbilityModifiers (UnitAbilityType, ModifierId) VALUES 
('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_ST');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_ST', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_ST', 'Amount', '7');
INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
('MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_ST', 'Preview', 'LOC_MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_ST');

INSERT OR
REPLACE INTO UnitAbilityModifiers(UnitAbilityType, ModifierId)
VALUES ('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'GUMOON_IGNORE_RIVER'),
       ('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'GUMOON_IGNORE_TERRAINS_COST');

INSERT OR
REPLACE INTO Modifiers(ModifierId, ModifierType)
VALUES ('GUMOON_IGNORE_RIVER', 'MODIFIER_PLAYER_UNIT_ADJUST_IGNORE_RIVERS'),
       ('GUMOON_IGNORE_TERRAINS_COST', 'MODIFIER_PLAYER_UNIT_ADJUST_IGNORE_TERRAIN_COST');

INSERT OR
REPLACE INTO ModifierArguments(ModifierId, Name, Value)
VALUES ('GUMOON_IGNORE_RIVER', 'Ignore', 1),
       ('GUMOON_IGNORE_TERRAINS_COST', 'Ignore', 1),
       ('GUMOON_IGNORE_TERRAINS_COST', 'Type', 'ALL');


INSERT INTO UnitAbilityModifiers (UnitAbilityType, ModifierId) VALUES
('ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5', 'MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_WALL_ATTACK');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_WALL_ATTACK', 'MODIFIER_PLAYER_UNIT_ADJUST_ENABLE_WALL_ATTACK', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_ABILITY_MODIFIER_GOVERNOR_PROMOTION_GUMOON_5_WALL_ATTACK', 'Enable', '1');

-- 梦求真：进行项目时提高百分之30生产力。
INSERT INTO GovernorPromotionModifiers (GovernorPromotionType, ModifierId) VALUES
('GOVERNOR_PROMOTION_GUMOON_4', 'MODIFIER_GOVERNOR_PROMOTION_GUMOON_4');
INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_4', 'MODIFIER_NW_PLAYER_CITIE_ADJUST_ALL_PROJECTS_PRODUCTION', 0, 0, 0, NULL, NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
('MODIFIER_GOVERNOR_PROMOTION_GUMOON_4', 'Amount', '30');
-- Custom ModifierType
INSERT INTO Types (Type, Kind) VALUES
('MODIFIER_NW_PLAYER_CITIE_ADJUST_ALL_PROJECTS_PRODUCTION', 'KIND_MODIFIER');
INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES
('MODIFIER_NW_PLAYER_CITIE_ADJUST_ALL_PROJECTS_PRODUCTION', 'COLLECTION_OWNER', 'EFFECT_ADJUST_ALL_PROJECTS_PRODUCTION');


